<!DOCTYPE html>
<!-- saved from url=(0019)file:///tmp/15.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

* {
    box-sizing: border-box;
}

body {
    width: 980px;
    margin-right: auto;
    margin-left: auto;
}

body .markdown-body {
    padding: 45px;
    border: 1px solid #ddd;
    border-radius: 3px;
    word-wrap: break-word;
}

pre {
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.markdown-body {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  color: #333;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background-color: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body strong {
  font-weight: bold;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body input {
  font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

.markdown-body a {
  color: #4078c0;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before {
  display: table;
  content: "";
}

.markdown-body hr:after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
  font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.markdown-body .select::-ms-expand {
  opacity: 0;
}

.markdown-body .octicon {
  font: normal normal normal 16px/1 octicons-anchor;
  display: inline-block;
  text-decoration: none;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.markdown-body .octicon-link:before {
  content: '\f05c';
}

.markdown-body:before {
  display: table;
  content: "";
}

.markdown-body:after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body a:not([href]) {
  color: inherit;
  text-decoration: none;
}

.markdown-body .anchor {
  display: inline-block;
  padding-right: 2px;
  margin-left: -18px;
}

.markdown-body .anchor:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  color: #000;
  vertical-align: middle;
  visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  visibility: visible;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h1 .anchor {
  line-height: 1;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 .anchor {
  line-height: 1;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h3 .anchor {
  line-height: 1.2;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h4 .anchor {
  line-height: 1.2;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h5 .anchor {
  line-height: 1.1;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body h6 .anchor {
  line-height: 1.1;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  box-sizing: content-box;
  background-color: #fff;
}

.markdown-body code {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .highlight pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

.markdown-body kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb;
}

.markdown-body .pl-c {
  color: #969896;
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
  color: #0086b3;
}

.markdown-body .pl-e,
.markdown-body .pl-en {
  color: #795da3;
}

.markdown-body .pl-s .pl-s1,
.markdown-body .pl-smi {
  color: #333;
}

.markdown-body .pl-ent {
  color: #63a35c;
}

.markdown-body .pl-k {
  color: #a71d5d;
}

.markdown-body .pl-pds,
.markdown-body .pl-s,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sra,
.markdown-body .pl-sr .pl-sre {
  color: #183691;
}

.markdown-body .pl-v {
  color: #ed6a43;
}

.markdown-body .pl-id {
  color: #b52a1d;
}

.markdown-body .pl-ii {
  background-color: #b52a1d;
  color: #f8f8f8;
}

.markdown-body .pl-sr .pl-cce {
  color: #63a35c;
  font-weight: bold;
}

.markdown-body .pl-ml {
  color: #693a17;
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
  color: #1d3e81;
  font-weight: bold;
}

.markdown-body .pl-mq {
  color: #008080;
}

.markdown-body .pl-mi {
  color: #333;
  font-style: italic;
}

.markdown-body .pl-mb {
  color: #333;
  font-weight: bold;
}

.markdown-body .pl-md {
  background-color: #ffecec;
  color: #bd2c00;
}

.markdown-body .pl-mi1 {
  background-color: #eaffea;
  color: #55a532;
}

.markdown-body .pl-mdr {
  color: #795da3;
  font-weight: bold;
}

.markdown-body .pl-mo {
  color: #1d3e81;
}

.markdown-body kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb;
}

.markdown-body .plan-price-unit {
  color: #767676;
  font-weight: normal;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 0.35em 0.25em -1.6em;
  vertical-align: middle;
}

.markdown-body .plan-choice {
  padding: 15px;
  padding-left: 40px;
  display: block;
  border: 1px solid #e0e0e0;
  position: relative;
  font-weight: normal;
  background-color: #fafafa;
}

.markdown-body .plan-choice.open {
  background-color: #fff;
}

.markdown-body .plan-choice.open .plan-choice-seat-breakdown {
  display: block;
}

.markdown-body .plan-choice-free {
  border-radius: 3px 3px 0 0;
}

.markdown-body .plan-choice-paid {
  border-radius: 0 0 3px 3px;
  border-top: 0;
  margin-bottom: 20px;
}

.markdown-body .plan-choice-radio {
  position: absolute;
  left: 15px;
  top: 18px;
}

.markdown-body .plan-choice-exp {
  color: #999;
  font-size: 12px;
  margin-top: 5px;
}

.markdown-body .plan-choice-seat-breakdown {
  margin-top: 10px;
  display: none;
}

.markdown-body :checked+.radio-label {
  z-index: 1;
  position: relative;
  border-color: #4078c0;
}
</style><title>ProjectReport</title></head><body><article class="markdown-body"><h1>
<a id="user-content-openstreetmap-project" class="anchor" href="file:///tmp/15.html#openstreetmap-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>OpenStreetMap Project</h1>
<h2>
<a id="user-content-data-wrangling-with-mongodb" class="anchor" href="file:///tmp/15.html#data-wrangling-with-mongodb" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Data Wrangling with MongoDB</h2>
<h3>
<a id="user-content-david-vartanian" class="anchor" href="file:///tmp/15.html#david-vartanian" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>David Vartanian</h3>
<p>Map Area: Buenos Aires, Argentina</p>
<p><a href="https://mapzen.com/data/metro-extracts/metro/buenos-aires_argentina/">https://mapzen.com/data/metro-extracts/metro/buenos-aires_argentina/</a></p>
<h2>
<a id="user-content-problems-encountered-in-the-map" class="anchor" href="file:///tmp/15.html#problems-encountered-in-the-map" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Problems encountered in the Map</h2>
<h3>
<a id="user-content-street-type" class="anchor" href="file:///tmp/15.html#street-type" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Street Type</h3>
<p>I've noticed that normal street names in Argentina don't include <em>Calle</em> as part of their names, but other types do. For instance, <em>Avenida del Libertador</em> is an avenue. But, what is <em>Azcuénaga</em>? Well, it's a normal street. You can assume it because <em>Calle</em> is <strong>always</strong> omited.
Here some examples I've found using abbreviated street types, no matter the structure:</p>
<h4>
<a id="user-content-av-avenida---avenue" class="anchor" href="file:///tmp/15.html#av-avenida---avenue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Av (Avenida - Avenue)</h4>
<ul>
<li>128 - Av. Hipólito Yrigoyen</li>
<li>316 - Av. 12 de Octubre</li>
<li>Av. Doctor Honorio Pueyrredón</li>
<li>Av. Dr: Ramos Mejía</li>
<li>av 101 n 1661 san martin</li>
</ul>
<h4>
<a id="user-content-pje-pasaje---passageway" class="anchor" href="file:///tmp/15.html#pje-pasaje---passageway" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>PJE (Pasaje - Passageway)</h4>
<ul>
<li>PJE A MAGALDI</li>
<li>PJE DE LA VIA</li>
<li>PJE ECHAG?E</li>
<li>PJE HILARIO LAGOS</li>
<li>PJE TARIJA</li>
</ul>
<h4>
<a id="user-content-calle-street-type-omitted-in-street-name" class="anchor" href="file:///tmp/15.html#calle-street-type-omitted-in-street-name" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Calle (Street, type omitted in street name)</h4>
<ul>
<li>525</li>
<li>Edison</li>
<li>Escalada</li>
<li>Lafinur</li>
<li>Marcelo T. de Alvear</li>
</ul>
<h3>
<a id="user-content-numbers-as-street-names" class="anchor" href="file:///tmp/15.html#numbers-as-street-names" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Numbers as street names</h3>
<p>In general, streets in Argentina are named after former militar or political leaders, as well as country names, or even dates of important events. However, some cities use only numbers as street names. Others, though, use number and name. For instance, <em>43</em> (just the number) or <em>Avenida 13</em> (an avenue), or a more complex structure, <em>900 - General Juan Lavalle</em>.</p>
<h3>
<a id="user-content-complexity-does-not-mean-problem" class="anchor" href="file:///tmp/15.html#complexity-does-not-mean-problem" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Complexity does not mean problem</h3>
<p>After auditing all streets contained in <em>way</em> tags I could not find any technical problem. It seems that someone else have done this job before. Instead, there were many irregularities on street names contained in <em>node</em> tags. That's why I decided to audit both <em>nodes</em> and <em>ways</em>. Although it's been quite complex to identify street types from street names due to the different existent structures.</p>
<h3>
<a id="user-content-street-auditing-results" class="anchor" href="file:///tmp/15.html#street-auditing-results" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Street Auditing Results</h3>
<p>Given the complexity on street names, I created this function using a mapping dictionary to update street names:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">update_name</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">name</span>):
    newname <span class="pl-k">=</span> name
    <span class="pl-k">for</span> k <span class="pl-k">in</span> <span class="pl-c1">self</span>.mapping.keys():
        pattern <span class="pl-k">=</span> <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span><span class="pl-pds">'</span></span><span class="pl-k">+</span>k<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">'</span>\.?\s<span class="pl-pds">'</span></span>
        <span class="pl-k">if</span> re.match(pattern, name, re.<span class="pl-c1">IGNORECASE</span>):
            newname <span class="pl-k">=</span> re.sub(pattern, <span class="pl-c1">self</span>.mapping[k]<span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>, name, re.<span class="pl-c1">IGNORECASE</span>)
    <span class="pl-k">return</span> newname</pre></div>
<h4>
<a id="user-content-applying-street-type-cleaning" class="anchor" href="file:///tmp/15.html#applying-street-type-cleaning" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Applying Street Type Cleaning</h4>
<table>
<thead>
<tr>
<th>Before</th>
<th>After</th>
</tr>
</thead>
<tbody>
<tr>
<td>Avenda Avellaneda</td>
<td>Avenida Avellaneda</td>
</tr>
<tr>
<td>Cno. Belgrano e/ 473 bis y 474</td>
<td>Camino Belgrano e/ 473 bis y 474</td>
</tr>
<tr>
<td>Cno. Centenario y 461e</td>
<td>Camino Centenario y 461e</td>
</tr>
<tr>
<td>Ave. Scalabrini Ortíz</td>
<td>Avenida Scalabrini Ortíz</td>
</tr>
<tr>
<td>BV GDOR MARTIN RODRIGUEZ</td>
<td>Boulevard GDOR MARTIN RODRIGUEZ</td>
</tr>
<tr>
<td>Au Pres. H. Cámpora</td>
<td>Autopista Pres. H. Cámpora</td>
</tr>
</tbody>
</table>
<h2>
<a id="user-content-data-overview" class="anchor" href="file:///tmp/15.html#data-overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Data Overview</h2>
<h3>
<a id="user-content-basic-statistical-overview" class="anchor" href="file:///tmp/15.html#basic-statistical-overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Basic statistical overview</h3>
<p>The following information corresponds to the XML file <em>buenos-aires_argentina.osm</em> file downloaded from <em>MapZen Metro Extracts</em> website with size of 396MB, converted to a JSON file with size of 426MB.</p>
<h4>
<a id="user-content-mongodb-import" class="anchor" href="file:///tmp/15.html#mongodb-import" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>MongoDB Import</h4>
<pre><code>➜  data git:(master) ✗ mongoimport -u openstreetmap -d openstreetmap -c buenosaires --file buenos-aires_argentina.json
Enter password:

2017-08-20T20:06:54.309+0200	connected to: localhost
2017-08-20T20:06:57.295+0200	[##......................] openstreetmap.buenosaires	47.0MB/426MB (11.0%)
2017-08-20T20:07:00.295+0200	[#####...................] openstreetmap.buenosaires	94.0MB/426MB (22.1%)
2017-08-20T20:07:03.295+0200	[########................] openstreetmap.buenosaires	148MB/426MB (34.7%)
2017-08-20T20:07:06.295+0200	[###########.............] openstreetmap.buenosaires	210MB/426MB (49.2%)
2017-08-20T20:07:09.295+0200	[##############..........] openstreetmap.buenosaires	264MB/426MB (61.9%)
2017-08-20T20:07:12.295+0200	[##################......] openstreetmap.buenosaires	322MB/426MB (75.6%)
2017-08-20T20:07:15.295+0200	[#####################...] openstreetmap.buenosaires	386MB/426MB (90.6%)
2017-08-20T20:07:17.214+0200	[########################] openstreetmap.buenosaires	426MB/426MB (100.0%)
2017-08-20T20:07:17.214+0200	imported 1891788 documents
</code></pre>
<h4>
<a id="user-content-number-of-documents" class="anchor" href="file:///tmp/15.html#number-of-documents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Number of documents</h4>
<pre><code>&gt; db.buenosaires.find().count()
1891788
</code></pre>
<h4>
<a id="user-content-unique-users" class="anchor" href="file:///tmp/15.html#unique-users" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Unique users</h4>
<p>The total amount of unique users is <em>2677</em>, given by the following aggregation query:</p>
<pre><code>&gt; db.buenosaires.aggregate([
... {"$group": {"_id": "$created.uid"}},
... {"$group": {"_id": "unique_users", "count": {"$sum": 1}}}
... ])
{ "_id" : "unique_users", "count" : 2677 }
</code></pre>
<h4>
<a id="user-content-number-of-nodes-and-ways" class="anchor" href="file:///tmp/15.html#number-of-nodes-and-ways" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Number of nodes and ways</h4>
<p>The total amount of nodes is <em>1553770</em>, and ways <em>337982</em>, given by the following aggregation query:</p>
<pre><code>&gt; db.buenosaires.aggregate([
... {"$match": {"$or": [{type:"node"},{type:"way"}]}},
... {"$group": {"_id": "$type", "count": {"$sum":1}}}
... ])
{ "_id" : "way", "count" : 337982 }
{ "_id" : "node", "count" : 1553770 }
</code></pre>
<h4>
<a id="user-content-number-of-chosen-type-of-nodes-like-cafes-shops-etc" class="anchor" href="file:///tmp/15.html#number-of-chosen-type-of-nodes-like-cafes-shops-etc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Number of chosen type of nodes, like cafes, shops, etc.</h4>
<p>Actually I wanted to know which are the most frequent <em>amenity</em> and <em>shop</em> nodes.</p>
<p>The following query reveals the Top 10 amenities:</p>
<pre><code>db.buenosaires.aggregate([
... {"$match": {"$and": [{type:"node"}, {amenity: {"$ne": null}}]}},
... {"$group": {"_id": "$amenity", "count": {"$sum": 1}}},
... {"$sort": {"count": -1}},
... {"$limit": 10}
... ])
{ "_id" : "restaurant", "count" : 2841 }
{ "_id" : "pharmacy", "count" : 1557 }
{ "_id" : "school", "count" : 1182 }
{ "_id" : "bench", "count" : 1077 }
{ "_id" : "cafe", "count" : 1017 }
{ "_id" : "fast_food", "count" : 902 }
{ "_id" : "bank", "count" : 857 }
{ "_id" : "fuel", "count" : 817 }
{ "_id" : "parking", "count" : 600 }
{ "_id" : "ice_cream", "count" : 569 }
</code></pre>
<p>And this query reveals the Top 10 shops:</p>
<pre><code>&gt; db.buenosaires.aggregate([
... {"$match": {"$and": [{type: "node"}, {shop: {"$ne": null}}]}},
... {"$group": {"_id": "$shop", "count": {"$sum": 1}}},
... {"$sort": {"count": -1}},
... {"$limit": 10}
... ])
{ "_id" : "yes", "count" : 4302 }
{ "_id" : "clothes", "count" : 1404 }
{ "_id" : "convenience", "count" : 1123 }
{ "_id" : "supermarket", "count" : 1051 }
{ "_id" : "bakery", "count" : 783 }
{ "_id" : "butcher", "count" : 724 }
{ "_id" : "lottery", "count" : 682 }
{ "_id" : "hairdresser", "count" : 669 }
{ "_id" : "car_repair", "count" : 640 }
{ "_id" : "hardware", "count" : 541 }
</code></pre>
<p>Since the value <em>yes</em> is actually "<em>A shop of unspecified type</em>" as you can see <a href="https://taginfo.openstreetmap.org/keys/shop#values">in TagInfo Documentation</a>, let's try to get the shop type via amenity field:</p>
<pre><code>&gt; db.buenosaires.aggregate([
... {"$match": {"$and":[{type:"node"}, {shop:"yes"}]}},
... {"$project": {_id: 0, amenity: 1}},
... {"$group": {"_id": "$amenity", "count": {"$sum": 1}}}
... ])
{ "_id" : "taxi", "count" : 1 }
{ "_id" : "fuel", "count" : 41 }
{ "_id" : null, "count" : 4257 }
{ "_id" : "ice_cream", "count" : 2 }
{ "_id" : "events_venue", "count" : 1 }

</code></pre>
<p>Well, not really. There is a large amount of <em>shop: yes</em> documents without <em>amenity</em>. Let's see first whether it's worth to give a try to go further:</p>
<pre><code>&gt; db.buenosaires.aggregate([
... {"$match": {"$and":[{type:"node"}, {shop:"yes"}, {amenity:null, description:null, brand:null, craft:null}]}},
... {"$group": {"_id": "nodata", "count": {"$sum": 1}}}
... ])
{ "_id" : "nodata", "count" : 4227 }
</code></pre>
<p>After this result I decided not to go further looking for more information about shops with no description.</p>
<h4>
<a id="user-content-top-3-contributing-users" class="anchor" href="file:///tmp/15.html#top-3-contributing-users" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Top 3 contributing users</h4>
<p>These are the most frequent users in this particular dataset:</p>
<pre><code>&gt; db.buenosaires.aggregate([
... {"$group": {"_id": "$created.user", "count": {"$sum": 1}}},
... {"$sort": {"count": -1}},
... {"$limit": 3}
... ])
{ "_id" : "Souchong", "count" : 235340 }
{ "_id" : "AgusQui", "count" : 179087 }
{ "_id" : "argenos", "count" : 157879 }
</code></pre>
<h2>
<a id="user-content-additional-ideas" class="anchor" href="file:///tmp/15.html#additional-ideas" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Additional Ideas</h2>
<p>Street names in Argentina are complex due to omissions and the structure using only numbers, combined with names, or event dates. I spent some time creating a list to filter possible street names not referring to street types, what you can see in <a href="file:///home/david/Documents/Udacity/Data%20Analyst%20Nanodegree/4.%20Data%20Wrangling/Final%20Project/audit.py">audit.py</a> file.</p>
<p>Since documents don't have a declared schema, it's common to find documents with different structure in the same collection. Running this map reduce command found <a href="https://stackoverflow.com/a/2308036/3456290">here</a> in the MongoDB console, I've found 764 possible keys, filtering by documents with type <em>node</em>:</p>
<pre><code>&gt; mr = db.runCommand({
... "mapreduce": "buenosaires",
... "map": function() {
...   if (this.type == 'node') {
...     for (var key in this) {
...       emit(key, null);
...     }
...   }
... },
... "reduce": function(key, data) { return null; },
... "out": "buenosaires_keys"
... })
{
	"result" : "buenosaires_keys",
	"timeMillis" : 17075,
	"counts" : {
		"input" : 1891788,
		"emit" : 8260422,
		"reduce" : 115110,
		"output" : 764
	},
	"ok" : 1
}
&gt; db[mr.result].distinct("_id")
[
	"FIXME",
	"Game_ID",
	"ISO3166-1_alpha2",
	"_description_",
	"_id",
	"abandoned",
	...
	"wifi",
	"wikidata",
	"wikipedia"
]
</code></pre>
<p>Given the large amount of possible keys, it would be a better idea to filter those documents having only basic keys [_id, type, id, pos, created]:</p>
<pre><code>&gt; db.buenosaires.find({"$where": "for (k in this) { if (this.type == 'node' &amp;&amp; ['_id','type','id','pos','created'].indexOf(k)!==-1) { return false;}} return this;"}).count()
338018
</code></pre>
<p>Now I'm sure that almost 22% of <em>nodes</em> are not eligible to be classified. I conclude this because it's not possible to classify an element based on its position, creation information or id. So some further action should be taken with these documents, like encouraging contributors to add more accurate information. Although this query is quite expensive, since it runs javascript code for each element in the loop.</p>
<p>Since 22% of <em>nodes</em> are just points in the map without any further information, I think it would be a good idea to encourage contributing users to provide more information.</p>
<h3>
<a id="user-content-gamification" class="anchor" href="file:///tmp/15.html#gamification" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Gamification</h3>
<p>I've seen the idea of <em>gamification</em> before. I support this idea and will give a reason why. I believe that <em>motivation</em> is our biggest inner engine. On the other hand, rewards produce motivation. That's what gamification does. A simple progress bar, level badges, public recognition or even some virtual/real prizes can help a lot to improve OpenStreetMap Project significantly.</p>
<h3>
<a id="user-content-making-things-easier" class="anchor" href="file:///tmp/15.html#making-things-easier" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Making things easier</h3>
<p>I would help a lot improving forms with better help texts and predictive algorithms to suggest values on certain fields. For instance, suggesting the type of amenity based on the name and location (what's the probability of this place to be a restaurant if in the same area 85% or nodes are also restaurants?). I've found that helping to fill out <em>amenity</em> and <em>shop</em> fields would help much more than other fields.</p>
<h3>
<a id="user-content-end-users-dont-look-for-empty-nodes" class="anchor" href="file:///tmp/15.html#end-users-dont-look-for-empty-nodes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>End-users don't look for empty nodes</h3>
<p>We all are also end-users. What do we expect when we look for something in our map application? I want to find that café where delicious muffins are sold, or ATM accepting international cards, grocery, and so on. Detailed information that would be very useful to find. So, I think this is the challenge: to guide contributing users to be helpful for end-users.</p>
<h1>
<a id="user-content-conclusion" class="anchor" href="file:///tmp/15.html#conclusion" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Conclusion</h1>
<p>After analysing, cleaning, and identifying problems and possible solutions, there is still much more to do. Not only to encourage contributing users (or end-users to become contributors) to enter more data. I think that another solution could be to generate data automatically using machine learning algorithms, the same way a <em>recommender system</em> could work, but for <em>nodes</em>, and asking contributing users to review.</p>
</article></body></html>